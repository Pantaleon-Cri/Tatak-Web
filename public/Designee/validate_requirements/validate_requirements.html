<!-- validate_requirements.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Validate Requirements</title>

  <!-- Styles -->
  <link rel="stylesheet" href="../designee.css" />
  <link rel="stylesheet" href="validate_requirements.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>

  <style>/* Inline filters in table headers */


/* Style for select inputs in table headers */
th.filter-header select {

    font-size: 13px;
    border-radius: 5px;
    border: 1px solid var(--border-color);
    background-color: var(--card-bg);
    color: var(--dark-grey-text);
    cursor: pointer;
    min-width: 30px;
    transition: all 0.2s ease;
}

th.filter-header select:hover {
    border-color: var(--primary-green);
}

th.filter-header select:focus {
    outline: none;
    border-color: var(--primary-green);
    box-shadow: 0 0 3px rgba(76, 175, 80, 0.4);
}
/* =============== Member Container Overlay =============== */
#membersContainer {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: none; /* Hidden until opened */
  justify-content: center;
  align-items: center;
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(4px);
  z-index: 1000;
  overflow-y: auto;
  animation: fadeIn 0.3s ease forwards;
}

/* Fade-in animation */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

/* =============== Popup Card Container =============== */
#membersContainer.active {
  display: flex;
}

.members-popup {
  background: #ffffff;
  border-radius: 12px;
  padding: 24px;
  max-width: 700px;
  width: 90%;
  box-shadow: 0 8px 24px rgba(0,0,0,0.2);
  animation: slideUp 0.3s ease;
}

@keyframes slideUp {
  from { transform: translateY(30px); opacity: 0; }
  to { transform: translateY(0); opacity: 1; }
}

/* Header and Close Button */
.members-popup-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 16px;
}
.members-popup-header h2 {
  margin: 0;
  font-size: 1.2rem;
  color: #333;
}
.close-members-btn {
  background: none;
  border: none;
  font-size: 20px;
  cursor: pointer;
  color: #555;
  transition: color 0.2s;
}
.close-members-btn:hover {
  color: #000;
}

/* =============== Member Cards =============== */
.members-list {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr));
  gap: 16px;
}

.member-card {
  background: #f9fafb;
  border-radius: 10px;
  padding: 14px 16px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.08);
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}
.member-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 4px 10px rgba(0,0,0,0.12);
}

.member-card p {
  margin: 0 0 8px;
  color: #333;
  font-weight: 500;
}

/* Delete Button */
.delete-member-btn {
  background: #e74c3c;
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 6px;
  cursor: pointer;
  transition: background 0.2s;
  font-size: 0.85rem;
}
.delete-member-btn:hover {
  background: #c0392b;
}

  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="header">
    <div class="header-left">
      <img src="../../logo.png" alt="Logo" class="logo" />
      <div class="title">
        <span class="system-name">TATAK</span>
        <span class="divider">|</span>
        <span class="dashboard-title">Designee - Validate Requirements</span>
      </div>
    </div>
    <div class="header-right">
      <div class="user-dropdown" id="userDropdownToggle">
        <div class="user-info">
          <div class="username" id="usernameDisplay"></div>
          <div class="email" id="userRoleDisplay"></div>
        </div>
        <i class="fas fa-angle-down dropdown-arrow"></i>
      </div>
      <div class="dropdown-menu" id="dropdownMenu">
        <a href="../settings/settings.html">Settings</a>
        <a href="#" id="logoutBtn">Logout</a>
      </div>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <div class="content-wrapper scrollable-horizontal">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="sidebar-header"></div>
      <nav>
        <ul>
          <li><a href="../designee.html"><i class="fas fa-tachometer-alt"></i> Manage Staff</a></li>
          <li><a href="../add_requirements/add_requirements.html"><i class="fas fa-table"></i> Add Requirements</a></li>
          <li><a href="../validate_requirements/validate_requirements.html" class="active"><i class="fas fa-check-circle"></i> Validate Requirements</a></li>
        </ul>
      </nav>
    </aside>

    <!-- MAIN CONTENT AREA -->
    <div class="container">
     <section class="validate-header">
  <div class="header-top">
    <h1>Validate Requirements</h1>
    <input type="file" id="uploadInput" accept=".xlsx, .csv" style="display:none;" />
  <button class="add-all-btn" id="uploadBtn"><i class="fas fa-upload"></i> Upload Members</button>
  <button class="add-all-btn" id="downloadBtn"><i class="fas fa-download"></i> Download Template</button>
  <button class="add-all-btn" id="UserEditBtn"><i class="fas fa-user"></i> Edit Members</button>
  <div id="membersContainer" style="margin-top:20px;"></div>
  </div>
  
  
  <div class="search-box">
      <input type="text" placeholder="Search by ID or Name" class="search-input" id="searchInput" />
      <button class="search-button"><i class="fas fa-search"></i></button>
    </div>
 
</section>


      <main class="table-container">
        <table>
          <thead>
            <tr>
              <th>Incomplete</th>
              <th>Violation</th>
              <th>Officer</th>
              <th>ID No.</th>
              <th>Full Name</th>
  <th class="filter-header">
      <span>Dept</span>
      <select id="filterDepartment">
        <option value="">All</option>
        <!-- Dynamic options will populate here -->
      </select>
    </th>
    <th class="filter-header">
      <span>Year Level</span>
      <select id="filterYear">
        <option value="">All</option>
        <!-- Dynamic options will populate here -->
      </select>
    </th>
              <th>Pre Requisite</th>
              <th>Status</th>
              <th>Action</th>
            </tr>
          </thead>
          <tbody id="studentsTableBody">
            <!-- Dynamically populated -->
          </tbody>
        </table>
      </main>
    </div>
  </div>

  <!-- Checklist Modal -->
  <div id="checklistModal" class="modal-overlay">
    <div class="modal-content">
      <span class="close" id="closeChecklist"></span>
      <div class="modal-header">
        <h2>Requirements Checklist</h2>
      </div>
      <div class="modal-body">
        <!-- Dynamic requirements checkboxes will be inserted here -->
      </div>
      <div class="modal-footer">
        <button id="cancelBtn" class="btn-cancel">Cancel</button>
        <button id="saveBtn" class="btn-save">Save</button>
      </div>
    </div>
  </div>

  <!-- Clearance Modal -->
<div id="clearanceModal" class="clearance-modal-overlay">
  <div class="clearance-modal-wrapper">
    <div class="clearance-container">
      <span class="close" id="closeClearanceBtn"></span>
      <div class="head">
        <div class="head-left">
          <img src="../../ndmu_logo.png" alt="University Logo" />
        </div>
        <div class="head-center">
          <h3>JMJ Marist Brothers</h3>
          <h1>Notre Dame of Marbel University</h1>
          <p>City of Koronadal South Cotabato</p>
          <h4>CLEARANCE</h4>
          <p id="semesterText">Loading semester...</p>
        </div>
        <div class="head-right">
          <img src="../../green_univ.png" alt="Learning Icon" />
        </div>
      </div>

   <!-- Members Popup Container -->
<div id="membersContainer">
  <div class="members-popup">
    <div class="members-popup-header">
      <h2>Members List</h2>
      <button class="close-members-btn" onclick="closeMembersPopup()">Ã—</button>
    </div>
    <div class="members-list" id="membersList">
      <!-- Member cards will populate here -->
    </div>
  </div>
</div>



      <div class="info-section">
        <div>I.D No.: <span id="studentId">Loading...</span></div>
        <div>Name: <span id="studentName">Loading...</span></div>
        <div>Status: <span id="status">Loading...</span></div>
      </div>

      <div class="divider"></div>

      <div class="sections-grid" id="officeSectionsGrid"></div>
      <div class="non-academic-section" id="nonAcademicSectionsGrid"></div>

      <div class="note">
        NOTE: The <strong>RECORDS SECTION</strong> will release your 
        <strong>EXAM PERMIT</strong> for the <strong>FINALS</strong> if you 
        can present this clearance fully accomplished.
      </div>
    </div>
  </div>
</div>

</div>


  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
   <script src="preReq.js"></script>
  <script src="validate_requirements.js"></script>
  
  <script src="modal_validate.js"></script>
  <script src="upload.js"></script>
  <script src="modal_view.js"></script>
 
  <script src="user.js"></script>
 
</body>
</html>
